# ãƒ¢ãƒãƒ¬ãƒæ§‹æˆã®ä¸æ•´åˆãƒã‚§ãƒƒã‚¯ãƒ¬ãƒãƒ¼ãƒˆ

## ğŸ” ãƒã‚§ãƒƒã‚¯çµæœã‚µãƒãƒªãƒ¼

### 1. âŒ React ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®ä¸æ•´åˆ

ç¾åœ¨ã€ä»¥ä¸‹ã®3ã¤ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ãŒæ··åœ¨ã—ã¦ã„ã¾ã™ï¼š
- React 19.1.1ã‚’ä½¿ç”¨: app, uiç³»ã®æ–°ã—ã„ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸
- React 18.x.xã‚’ä½¿ç”¨: å¤ã„ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã€ãƒ—ãƒ©ã‚°ã‚¤ãƒ³
- è¤‡æ•°ãƒãƒ¼ã‚¸ãƒ§ãƒ³å¯¾å¿œ: ä¸€éƒ¨ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§ `^18.0.0 || ^19.0.0`

**å•é¡Œç‚¹:**
- ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®ä¸æ•´åˆã«ã‚ˆã‚Šã€å‹å®šç¾©ã®ä¸ä¸€è‡´ã‚„ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã™ã‚‹å¯èƒ½æ€§
- åŒã˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å†…ã§peerDependenciesã¨devDependenciesãŒç•°ãªã‚‹ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’æŒ‡å®š

### 2. âŒ TypeScript Targetè¨­å®šã®ä¸æ•´åˆ

tsconfig.jsonã§ã®targetè¨­å®šï¼š
- 15ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸: `ES2020`
- 3ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸: `esnext`
- 2ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸: `ES2022`
- ãƒ™ãƒ¼ã‚¹è¨­å®š: `ES2022`

**å•é¡Œç‚¹:**
- ãƒ™ãƒ¼ã‚¹è¨­å®šãŒ`ES2022`ãªã®ã«ã€å¤šãã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒ`ES2020`ã‚’ä½¿ç”¨
- ãƒ“ãƒ«ãƒ‰ãƒ„ãƒ¼ãƒ«ï¼ˆtsupï¼‰ã¯`es2022`ã‚’ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã«ã—ã¦ã„ã‚‹ãŒã€TypeScriptè¨­å®šã¨ä¸ä¸€è‡´

### 3. âš ï¸ tsconfig.json ã®å†—é•·ãªè¨­å®š

å¤šãã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§ä»¥ä¸‹ã®è¨­å®šãŒé‡è¤‡ã—ã¦ã„ã¾ã™ï¼š
```json
{
  "declaration": true,
  "declarationMap": true,
  "sourceMap": true
}
```
ã“ã‚Œã‚‰ã¯ã™ã§ã«`tsconfig.base.json`ã§å®šç¾©ã•ã‚Œã¦ã„ã¾ã™ã€‚

### 4. âœ… ãƒ“ãƒ«ãƒ‰ãƒ„ãƒ¼ãƒ«ã®çµ±ä¸€æ€§

- tsup: UIãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¨ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã§çµ±ä¸€çš„ã«ä½¿ç”¨
- ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ: ESMã§çµ±ä¸€ï¼ˆè‰¯å¥½ï¼‰
- ã‚¿ãƒ¼ã‚²ãƒƒãƒˆ: ä¸€éƒ¨ã®ã¿æ˜ç¤ºçš„ã«`es2022`ã‚’æŒ‡å®š

### 5. âš ï¸ package.json ã® export ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰

- ä¸€éƒ¨ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§`main`ã¨`module`ãŒåŒã˜ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®š
- tsupã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå‡ºåŠ›ã¨ä¸æ•´åˆã®å¯èƒ½æ€§

## ğŸ“‹ æ¨å¥¨ã•ã‚Œã‚‹ä¿®æ­£

### 1. React ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®çµ±ä¸€

**å…¨ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®peerDependencies:**
```json
{
  "peerDependencies": {
    "react": ">=18.0.0",
    "react-dom": ">=18.0.0"
  }
}
```

**appãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®dependencies:**
```json
{
  "dependencies": {
    "react": "^19.1.1",
    "react-dom": "^19.1.1"
  }
}
```

### 2. TypeScriptè¨­å®šã®ç°¡ç´ åŒ–

**å„ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®tsconfig.json:**
```json
{
  "extends": "../../tsconfig.base.json",
  "compilerOptions": {
    "outDir": "./dist",
    "rootDir": "./src"
  },
  "include": ["src/**/*"],
  "exclude": ["**/*.test.ts", "**/*.test.tsx"]
}
```

### 3. tsupè¨­å®šã®çµ±ä¸€

**å…±é€šã®tsup.config.ts:**
```typescript
import { defineConfig } from 'tsup';

export default defineConfig({
  entry: ['src/openstreetmap-type.ts'],
  format: ['esm'],
  target: 'es2022',
  dts: true,
  sourcemap: true,
  clean: true,
  external: ['react', 'react-dom'],
});
```

### 4. package.json ã®æœ€å°åŒ–

**type: module ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸:**
```json
{
  "type": "module",
  "exports": {
    ".": {
      "types": "./dist/index.d.ts",
      "import": "./dist/index.js"
    }
  },
  "files": ["dist", "README.md"]
}
```

## ğŸ¯ ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚¢ã‚¤ãƒ†ãƒ 

1. **é«˜å„ªå…ˆåº¦:**
   - [ ] React ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’peerDependenciesã§çµ±ä¸€
   - [ ] TypeScript targetè¨­å®šã‚’çµ±ä¸€

2. **ä¸­å„ªå…ˆåº¦:**
   - [ ] tsconfig.jsonã‹ã‚‰å†—é•·ãªè¨­å®šã‚’å‰Šé™¤
   - [ ] tsup.config.tsã‚’çµ±ä¸€

3. **ä½å„ªå…ˆåº¦:**
   - [ ] package.jsonã®exportsãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’æ•´ç†
   - [ ] ä¸è¦ãªdevDependenciesã‚’å‰Šé™¤

## ğŸ“Š å½±éŸ¿åº¦åˆ†æ

- **ãƒ“ãƒ«ãƒ‰æ™‚é–“ã¸ã®å½±éŸ¿:** TypeScriptè¨­å®šã®çµ±ä¸€ã«ã‚ˆã‚Šç´„10-15%ã®æ”¹å–„ãŒæœŸå¾…
- **ãƒãƒ³ãƒ‰ãƒ«ã‚µã‚¤ã‚º:** targetè¨­å®šã®çµ±ä¸€ã«ã‚ˆã‚Šã€ä¸è¦ãªpolyfillã‚’å‰Šæ¸›å¯èƒ½
- **é–‹ç™ºä½“é¨“:** è¨­å®šã®ç°¡ç´ åŒ–ã«ã‚ˆã‚Šã€æ–°è¦ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ä½œæˆãŒå®¹æ˜“ã«