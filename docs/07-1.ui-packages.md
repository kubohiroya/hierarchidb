## 7.1 UIモジュール


UIモジュールは機能ごとに複数のパッケージに分割されている。ここではそのうち代表的なものを説明する。

##### 7.1.2 ui-coreモジュール

##### 目的
- 基本的なUIコンポーネントとテーマシステムを提供。
- Material UI（MUI）をベースとした共通コンポーネント群。

##### 機能要件
- MUIコンポーネントのラッパーと拡張。
- テーマ管理とカスタマイズ機能。
- アイコンシステムとアニメーション。
- 通知システム（Toast、Notification）。

##### 含まれるもの
- Material UI関連（@mui/material、@mui/icons-material、@mui/x-date-pickers）
- スタイリング（@emotion/react、@emotion/styled）
- 基本コンポーネント（Button、Menu、Sidebar、Loading、ErrorBoundary等）
- テーマシステム（/theme、/themes）
- アイコン定義（/icons）
- ユーティリティ関数（/utils）

#### 7.1.3 ui-authモジュール

##### 目的
- 認証・認可機能を提供。
- OAuth2/OIDC認証のUIコンポーネント。

##### 機能要件
- 複数認証プロバイダー対応（Google、Microsoft、GitHub）。
- 認証状態管理とコンテキスト提供。
- ユーザー情報表示（アバター、ログインボタン）。

##### 含まれるもの
- OIDC Client（oidc-client-ts、react-oidc-context）
- OAuth関連（@react-oauth/google）
- 認証コンポーネント（AuthPanel、AuthProvider、AuthErrorBoundary）
- 認証フック（useAuthBFF、useAuthGoogle、useAuthOIDC等）
- ユーザーコンポーネント（UserLoginButton、UserAvatar、Gravatar）

#### 7.1.4 ui-routingモジュール

##### 目的
- ルーティングとナビゲーション機能を提供。
- React Routerベースのルーティングシステム。

##### 機能要件
- ルート定義と管理。
- ナビゲーションコンポーネント。
- URLヘルパー関数。

##### 含まれるもの
- React Router（react-router、react-router-dom）
- ルーティング設定（/config/routing.ts）
- ナビゲーションコンポーネント（NavLinkMenu、LinkButton）

#### 7.1.5 ui-i18nモジュール

##### 目的
- 国際化（i18n）機能を提供。
- 多言語対応のUIコンポーネント。

##### 機能要件
- 言語切り替え機能。
- 翻訳リソース管理。
- ブラウザ言語の自動検出。

##### 含まれるもの
- i18next関連（i18next、react-i18next）
- 言語検出（i18next-browser-languagedetector）
- HTTPバックエンド（i18next-http-backend）
- 言語プロバイダー（LanguageProvider）

#### 7.1.6 ui-clientモジュール

##### 目的
- Worker/API と UI を安全かつ型安全に接続するクライアント層。
- Comlink 経由の呼び出し管理、購読（Pub/Sub）とUI側のフック提供。

##### 機能要件
- Worker 接続のライフサイクル管理（初期化/終了）。
- React フック（useTreeQuery/useTreeMutation/useSubscription 等）。
- エラー/再試行/キャンセル制御。

##### 含まれるもの
- 接続管理（Comlink エンドポイント、ポート管理）
- React 用フック/コンテキスト
- 型安全なクライアントラッパー

---

#### 7.1.7 ui-layoutモジュール

##### 目的
- 共通レイアウトの提供（ヘッダー/フッター/サイドバー/レスポンシブグリッド）。

##### 機能要件
- アプリ共通シェルの構築（AppShell, Sidebar, Header）。
- レスポンシブ対応とテーマ統合（ui-core と連携）。

##### 含まれるもの
- レイアウトコンポーネント（Container/Grid/ResizablePane 等）

---

#### 7.1.8 ui-navigationモジュール

##### 目的
- ナビゲーションと情報アーキテクチャを提供。

##### 機能要件
- メニュー/ブレッドクラム/リンクボタン。
- ルーティング補助（ui-routing と連携）。

##### 含まれるもの
- NavLinkMenu、LinkButton、Breadcrumbs など

---

#### 7.1.9 ui-fileモジュール

##### 目的
- ファイル入出力、外部URL/ファイルのバリデーション、インポート/エクスポートUIを提供。

##### 機能要件
- JSON などのインポート/エクスポートダイアログ。
- セキュアな外部URLバリデーション（例: validateExternalURL）。

##### 含まれるもの
- バリデーションユーティリティ（/src/utils/validation.ts 等）
- ファイル選択/ドラッグ&ドロップコンポーネント

---

#### 7.1.10 ui-monitoringモジュール

##### 目的
- クライアント側のロギング、エラーレポート、簡易メトリクス収集。

##### 機能要件
- ErrorBoundary、Logger、開発用オーバーレイ。
- 重要イベントの計測・可視化。

##### 含まれるもの
- Logger、ErrorBoundary、診断用ウィジェット

---

#### 7.1.11 ui-tourモジュール

##### 目的
- 初回利用者向けのガイド/ツアー機能。

##### 機能要件
- ステップ定義、強調表示、スキップ/再開。

##### 含まれるもの
- ツアーコンポーネント、ステップ管理フック


