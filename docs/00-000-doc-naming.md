# ドキュメントの命名規則（安定ソート対応）

目的: ファイル名の単純な名前順（lexicographical order, A→Z, 0→9）で一覧表示したときに、常に意図した順序で並ぶようにする。また、「枝番（サブセクション）」の有無の両方に対応する。

## 規則（推奨フォーマット）

- 形式: `MM-SSS-タイトル.md`
  - `MM`: メイン番号（2桁・ゼロパディング）。例: `01`, `02`, `10`。
  - `SSS`: 枝番（3桁・ゼロパディング）。枝番がない場合は `000` を用いる。
  - `タイトル`: ハイフン区切りの任意文字列（半角英数字・ハイフン推奨）。
- 区切り文字は半角ハイフン（`-`）。
- 例:
  - 枝番なし: `05-000-architecture.md`
  - 枝番あり: `05-010-serverside.md`, `05-020-core.md`, `05-030-api-worker.md`, `05-040-ui.md`

この形式にすることで、ファイルマネージャや GitHub 上の「名前順ソート」だけで、意図通りに並びます（数値を固定幅・ゼロ埋めするため、文字列比較と数値順が一致）。

## 枝番の運用ガイド

- デフォルトは `000`（枝番なし）を用います。
- 枝番は 3 桁（`001`〜`999`）を使用し、追加や挿入の余地を確保するため、10 刻み（`010`, `020`, `030`, ...）を推奨します。
  - 間に挿入したいときは `015` のように中間値を使えます。
- 大項目（`MM`）をまたぐ参照関係はタイトルか本文で相互リンクしてください。番号は順序制御のためにのみ使います。

## 既存ファイルからの移行ルール（互換運用）

プロジェクト内には `5.a-serverside.md` のように枝番に英字を使っている文書があります。新規作成・改名時は以下の変換を推奨します。

- `X.a-...` → `0X-010-...`
- `X.b-...` → `0X-020-...`
- `X.c-...` → `0X-030-...`
- `X.d-...` → `0X-040-...`

例:
- `5.a-serverside.md` → `05-010-serverside.md`
- `5.b-core.md` → `05-020-core.md`
- `5.c-api-worker.md` → `05-030-api-worker.md`
- `5.d-ui.md` → `05-040-ui.md`

すでに `N-タイトル.md` の形で運用している文書は、枝番なしとして `NN-000-タイトル.md` にすると整合します（例: `6-plugin-modules.md` → `06-000-plugin-modules.md`）。

移行は段階的で構いません。混在期間中でも、新規ファイルは本規則で作成することで、将来的な一括リネーム時の影響を最小化できます。

## 正規表現（検証・Lint 例）

- 許容パターン（厳格）: `^\d{2}-\d{3}-[a-z0-9-]+\.md$`
- 許容パターン（暫定・既存互換を含む）: `^(\d{2}-\d{3}-[a-z0-9-]+|\d+-[a-z0-9-]+|\d+\.[a-z]-[a-z0-9-]+)\.md$`

CI によるチェックやエディタのスニペットで活用してください。

## ベストプラクティス

- タイトルは英小文字＋ハイフンでスラッグ化（スペース/日本語は避けると衝突が少ない）。
- 章立ての大きな入れ替えが見込まれる場合は、まず `MM` の再割当てを行い、その後 `SSS` を 10 刻みで再配置すると安全です。
- 画像・補助ファイルは同じプレフィックスを付けると関連が把握しやすくなります。
  - 例: `05-040-ui/05-040-ui-wireframe.png`

## よくある質問

- Q: 枝番が不要な小さなメモは？
  - A: 将来の拡張を見越して `MM-000-...` としてください。別章へ昇格させるときの差分が最小になります。
- Q: 2 桁や 3 桁で足りますか？
  - A: 章は 99 まで、枝番は 999 まで対応できます。必要になれば幅を増やす方針に変えるより、新規プロジェクトや版での再割当てを推奨します。

---
本規則に従うことで、「名前順ソート = 期待する論理順」を常に達成しつつ、枝番の有無に関わらず一貫した並びを保てます。