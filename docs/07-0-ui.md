# 7 UI 層

本章では UI モジュール群の分割方針、各モジュールの責務・代表機能、app モジュールとの結線、UI ガイドラインをまとめる。

## 7.0 UI 層概要

### 7.0.1 UI ガイドライン（抜粋と拡張）

- 制御/非制御を混在させない。フォームは react-hook-form 等で統一。
- アクセシビリティ確保（ラベル/ロール/キーボード操作）。
- 大量行は仮想化（Virtualizer）。
- CSS-in-JS は最小限。テーマトークンを利用し直値を避ける。
- エラーハンドリングは UI 層で一箇所に集約。ログに機微情報を残さない。
- i18n: 文言は辞書化（直書き禁止）。Intl API で日時/数値フォーマット。
- パフォーマンス: 計測ポイントを用意、useMemo/useCallback 適切運用、不要な Deep copy 回避。

### 7.0.2 設計方針

- 制御/非制御を混在させない。フォームは react-hook-form 等で統一。
- アクセシビリティ（ラベル/ロール/キーボード操作）を確保。
- 大量行は仮想化必須（Virtualizer）。
- CSS-in-JS は最小限。テーマトークンを優先し直値を避ける。
- UI は機能別パッケージに分割し、必要機能のみ取り込むことでバンドル最適化。

### 7.0.3 i18n

- i18n
    - `ui-i18n` をベースに `LanguageProvider` を `providers.tsx` に組み込む設計が容易
    - 文言は `t('key')` パターンで抽出し、docs へのリンク名も翻訳

### 7.0.4 アクセシビリティ（推奨）
- アクセシビリティ
    - ボタン/リンクには `aria-label` を適切に付与
    - コントラスト比とキーボード操作を考慮
    - 
### 7.0.5 UI モジュールの分割（概要）
- @hierarchidb/ui-core: 基本 UI、MUI、テーマ、通知。
- @hierarchidb/ui-auth: 認証 UI とフック。
- @hierarchidb/ui-routing: ルーティングとナビゲーション補助。
- @hierarchidb/ui-i18n: 国際化（i18next 設定と言語切替）。
- @hierarchidb/ui-client: Worker/API 接続、フック群。
- @hierarchidb/ui-layout, ui-navigation, ui-file, ui-monitoring, ui-tour: レイアウト/動線/ファイル/監視/ガイドを分離提供。

- 必要な機能のみを選択導入してバンドルを最適化。
- 共通コンポーネントとテーマは ui-core に集中、周辺機能は分離。
