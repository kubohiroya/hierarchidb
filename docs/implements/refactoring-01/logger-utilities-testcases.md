# Logger Utilities Consolidation - テストケース

## 開発言語・フレームワーク

- **プログラミング言語**: TypeScript
  - **言語選択の理由**: プロジェクト全体がTypeScriptで構築されている
  - **テストに適した機能**: 型安全性による実行前エラー検出、モダンなテスト記法のサポート
- **テストフレームワーク**: Vitest
  - **フレームワーク選択の理由**: プロジェクトで既に使用されており、Viteとの統合が優れている
  - **テスト実行環境**: Node.js環境での単体テスト実行
- 🟢 この内容の信頼性レベル: package.jsonでvitestが確認済み

## 1. 正常系テストケース（基本的な動作）

### テストケース 1-1: 開発環境でのログ出力

- **テスト名**: 開発環境でカスタムプレフィックス付きログが出力される
  - **何をテストするか**: createLogger関数で作成したロガーが正しくプレフィックスを付けてログ出力する
  - **期待される動作**: console.logが指定プレフィックス付きで呼び出される
- **入力値**: 
  - プレフィックス: 'TestModule'
  - ログメッセージ: 'Test message'
  - **入力データの意味**: 実際のモジュール名とログメッセージを模擬
- **期待される結果**: console.logが'[TestModule]', 'Test message'で呼び出される
  - **期待結果の理由**: 開発時にモジュール名でログの出所を特定できる
- **テストの目的**: プレフィックス機能の正常動作確認
  - **確認ポイント**: プレフィックスが正しく付与されているか
- 🟢 このテストケースの信頼性レベル: 現在の実装から直接導出

### テストケース 1-2: エラーログの出力

- **テスト名**: 開発環境でエラーログが正しく出力される
  - **何をテストするか**: devError関数がconsole.errorを適切に呼び出す
  - **期待される動作**: console.errorが正しいプレフィックスで呼び出される
- **入力値**: 
  - プレフィックス: 'ErrorModule'
  - エラーメッセージ: 'Error occurred'
  - エラーオブジェクト: new Error('Test error')
  - **入力データの意味**: 実際のエラー発生時のデータ構造を再現
- **期待される結果**: console.errorが'[ErrorModule Error]', 'Error occurred', Errorオブジェクトで呼び出される
  - **期待結果の理由**: エラーの詳細情報を開発者に提供
- **テストの目的**: エラーログ機能の確認
  - **確認ポイント**: エラー情報が欠落なく出力されるか
- 🟢 このテストケースの信頼性レベル: 現在の実装から直接導出

### テストケース 1-3: 警告ログの出力

- **テスト名**: 開発環境で警告ログが正しく出力される
  - **何をテストするか**: devWarn関数がconsole.warnを適切に呼び出す
  - **期待される動作**: console.warnが正しいプレフィックスで呼び出される
- **入力値**: 
  - プレフィックス: 'WarnModule'
  - 警告メッセージ: 'Deprecated function used'
  - **入力データの意味**: 非推奨機能使用時の警告を模擬
- **期待される結果**: console.warnが'[WarnModule Warning]', 'Deprecated function used'で呼び出される
  - **期待結果の理由**: 開発者に注意喚起を行う
- **テストの目的**: 警告ログ機能の確認
  - **確認ポイント**: 警告レベルが正しく識別できるか
- 🟢 このテストケースの信頼性レベル: 現在の実装から直接導出

## 2. 異常系テストケース（エラーハンドリング）

### テストケース 2-1: 本番環境でのログ抑制

- **テスト名**: 本番環境でログが出力されない
  - **エラーケースの概要**: NODE_ENV='production'時にログを抑制
  - **エラー処理の重要性**: 本番環境での不要なログ出力防止、パフォーマンス向上
- **入力値**: 
  - NODE_ENV: 'production'
  - ログメッセージ: 'Should not appear'
  - **不正な理由**: 本番環境では開発用ログは不要
  - **実際の発生シナリオ**: デプロイ後の本番環境での動作
- **期待される結果**: console.log/error/warnが呼び出されない
  - **エラーメッセージの内容**: なし（ログが出力されない）
  - **システムの安全性**: 本番環境での情報漏洩防止
- **テストの目的**: 環境別ログ制御の確認
  - **品質保証の観点**: セキュリティとパフォーマンスの確保
- 🟢 このテストケースの信頼性レベル: 現在の実装から直接導出

### テストケース 2-2: 空のプレフィックス処理

- **テスト名**: 空のプレフィックスでもエラーが発生しない
  - **エラーケースの概要**: プレフィックスが空文字列の場合
  - **エラー処理の重要性**: 設定ミスでもシステムが停止しない
- **入力値**: 
  - プレフィックス: ''
  - ログメッセージ: 'Message without prefix'
  - **不正な理由**: プレフィックスが指定されていない
  - **実際の発生シナリオ**: 設定ミスや初期化前のログ出力
- **期待される結果**: console.logが'[]', 'Message without prefix'で呼び出される
  - **エラーメッセージの内容**: 空のプレフィックスでも正常動作
  - **システムの安全性**: グレースフルな処理継続
- **テストの目的**: エッジケースでの堅牢性確認
  - **品質保証の観点**: 予期しない入力での安定性
- 🟡 このテストケースの信頼性レベル: 妥当な推測

## 3. 境界値テストケース（最小値、最大値、null等）

### テストケース 3-1: 複数引数のログ出力

- **テスト名**: 可変長引数が正しく処理される
  - **境界値の意味**: 引数の個数が0個から複数個まで
  - **境界値での動作保証**: 任意の数の引数を正しく処理
- **入力値**: 
  - 0個の引数: devLog()
  - 1個の引数: devLog('single')
  - 複数の引数: devLog('multiple', {obj: 1}, [1,2,3])
  - **境界値選択の根拠**: 実際のログ出力パターンを網羅
  - **実際の使用場面**: デバッグ時の様々なデータ出力
- **期待される結果**: 
  - 0個: console.logが'[Prefix]'のみで呼び出される
  - 1個: console.logが'[Prefix]', 'single'で呼び出される
  - 複数: console.logが'[Prefix]', 'multiple', {obj: 1}, [1,2,3]で呼び出される
  - **境界での正確性**: 全ての引数が正しく渡される
  - **一貫した動作**: 引数の数に関わらず一貫した処理
- **テストの目的**: 可変長引数処理の確認
  - **堅牢性の確認**: 様々な引数パターンでの安定動作
- 🟢 このテストケースの信頼性レベル: 現在の実装（...args: any[]）から導出

### テストケース 3-2: 特殊な値のログ出力

- **テスト名**: null/undefined/NaNが正しく出力される
  - **境界値の意味**: JavaScript の特殊値
  - **境界値での動作保証**: 特殊値でもエラーなく処理
- **入力値**: 
  - null値: devLog(null)
  - undefined値: devLog(undefined)
  - NaN値: devLog(NaN)
  - **境界値選択の根拠**: JavaScriptの特殊値全て
  - **実際の使用場面**: エラー時や初期化前の値のデバッグ
- **期待される結果**: 
  - console.logがそれぞれの値で正しく呼び出される
  - **境界での正確性**: 特殊値も正確にログ出力
  - **一貫した動作**: エラーなく処理継続
- **テストの目的**: 特殊値処理の確認
  - **堅牢性の確認**: 予期しない値での安定性
- 🟡 このテストケースの信頼性レベル: 妥当な推測

### テストケース 3-3: 環境変数未設定時の動作

- **テスト名**: NODE_ENV未設定時は開発環境として動作
  - **境界値の意味**: 環境変数が存在しない状態
  - **境界値での動作保証**: デフォルト動作の確認
- **入力値**: 
  - NODE_ENV: undefined
  - ログメッセージ: 'Default environment'
  - **境界値選択の根拠**: 環境変数の設定忘れケース
  - **実際の使用場面**: ローカル開発環境での初期状態
- **期待される結果**: console.logが呼び出される（開発環境として動作）
  - **境界での正確性**: デフォルトが開発環境
  - **一貫した動作**: 未設定時も予測可能な動作
- **テストの目的**: デフォルト動作の確認
  - **堅牢性の確認**: 環境設定ミスでの安全な動作
- 🟡 このテストケースの信頼性レベル: 妥当な推測（一般的なNode.jsの慣習）