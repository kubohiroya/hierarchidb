# 逆生成ドキュメント（Reverse Engineering）

このディレクトリには、既存の実装から逆生成された要件定義書と分析文書が格納されています。

## 文書一覧

### BaseMap機能分析

#### 1. [basemap-requirements.md](./basemap-requirements.md)
**BaseMap機能の包括的要件定義書**

- **内容**: hierarchiidbとeria-cartographの実装から抽出された完全な要件仕様
- **形式**: EARS記法（Easy Approach to Requirements Syntax）
- **対象読者**: プロダクトマネージャー、アーキテクト、開発者
- **用途**: 要件確認、機能拡張計画、他プロジェクトへの適用

**主な内容:**
- 28個の機能要件（通常・条件付き・状態・オプション・制約）
- 12個の非機能要件（パフォーマンス・セキュリティ・ユーザビリティ・運用性）
- ユーザーストーリー（4つの主要シナリオ）
- Edgeケース・境界値テスト要件
- 受け入れ基準とテスト推奨事項

#### 2. [basemap-implementation-comparison.md](./basemap-implementation-comparison.md)
**技術的実装比較分析**

- **内容**: 両プロジェクトの実装アプローチの詳細比較
- **対象読者**: シニア開発者、アーキテクト、技術リーダー
- **用途**: アーキテクチャ選択、技術負債評価、チーム教育

**主な内容:**
- アーキテクチャパターン比較（AOP vs ResourceDefinition）
- データモデル・データベース層比較
- UI実装・API設計比較
- バリデーション戦略比較
- パフォーマンス・拡張性・保守性分析
- 採用判断指針と統合アプローチ提案

## 活用方法

### 1. 要件確認
```bash
# 新機能開発前の要件確認
cat docs/reverse/basemap-requirements.md | grep "REQ-"

# 非機能要件の確認
cat docs/reverse/basemap-requirements.md | grep "NFR-"
```

### 2. アーキテクチャ選択
```bash
# 実装比較の確認
cat docs/reverse/basemap-implementation-comparison.md | grep -A 5 "採用が適切なケース"
```

### 3. テスト計画
```bash
# 推奨テストケースの抽出
cat docs/reverse/basemap-requirements.md | grep -A 10 "推奨追加テスト"
```

## rev-requirements コマンドについて

これらの文書は、rev-requirements コマンドのプロセスに従って生成されました：

### 実行プロセス
1. **機能の特定と分析** - UIコンポーネント・API・データベーススキーマから機能抽出
2. **ユーザーストーリーの逆算** - 実装された機能からユーザー意図を推定
3. **EARS記法による要件分類** - 通常・条件付き・状態・オプション・制約要件の分類
4. **非機能要件の推定** - パフォーマンス・セキュリティ・ユーザビリティ・運用要件の推定
5. **Edgeケースの特定** - エラーハンドリング・バリデーションから異常系要件抽出
6. **受け入れ基準の生成** - テストケースから受け入れ基準を逆算

### 信頼度の指標
- **強い根拠** (70%): 実装 + テスト + 明確な動作確認
- **中程度の根拠** (25%): 実装 + 部分的テスト
- **弱い根拠** (5%): 実装のみ、推定で補完

## メンテナンス指針

### 更新タイミング
- 実装に重要な変更があった場合
- 新機能が追加された場合
- アーキテクチャが大幅に変更された場合
- 要件が明確になった場合

### 更新手順
1. 新しい実装を調査
2. 既存文書との差分確認
3. 要件の追加・修正・削除
4. 信頼度の再評価
5. レビューとステークホルダー確認

## 関連文書

### プロジェクト仕様書
- [7-aop-architecture.md](../7-aop-architecture.md) - AOPアーキテクチャ詳細仕様
- [4-development-guidelines.md](../4-development-guidelines.md) - 開発ガイドライン

### 実装文書
- hierarchiidb: `packages/plugins/basemap/`
- eria-cartograph: `app0/src/domains/resources/basemap/`

## 注意事項

### 制約事項
- **推定ベース**: 一部要件は実装からの推定であり、ステークホルダー確認が必要
- **進化段階**: hierarchiidbは設計段階、eria-cartographは運用段階
- **テストカバレッジ**: 完全なテスト検証は困難

### 推奨アクション
1. **ステークホルダーインタビュー** - 推定要件の確認
2. **ユーザビリティテスト** - 実際のワークフロー検証
3. **パフォーマンステスト** - 非機能要件の検証
4. **セキュリティ監査** - セキュリティ要件の詳細確認

これらの文書を活用することで、BaseMap機能の包括的理解と効率的な開発・改善が可能になります。