import{b as T,a as i}from"./vendor-react-DCOeofjU.js";import{j as e}from"./jsx-runtime-vjdH2-jS.js";import{a as b}from"./index-b_WjAjmz.js";import{W as y}from"./WorkerAPIClient-pGcfw4hP.js";import{C as n}from"./Container-BWHHl0R2.js";import{B as s,C as v,T as r}from"./Box-B7f5Nirn.js";import{A as p}from"./Alert-NxWFql_t.js";import"./logger-Dd_sLh6l.js";import"./DefaultPropsProvider-Dzc6Wkbi.js";import"./createSimplePaletteValueFilter-DzNscr7y.js";import"./Transition-DyhQlcsw.js";import"./popper-CMBiYTiD.js";import"./createSvgIcon-D-kvQizT.js";const G=T(function(){const[c,u]=i.useState(null),[f,m]=i.useState(!0),[x,g]=i.useState(null),[t,C]=i.useState(null);if(i.useEffect(()=>{async function j(){try{m(!0);const o=await y.getSingleton();u(o);const h=o.getAPI(),a=await h.getTrees();let d=null;a&&a.length>0?d=a[0]:d=await h.createTree({name:"Demo Tree",description:"TreeConsole Demo Tree"}),C(d)}catch(o){console.error("Failed to initialize WorkerAPIClient:",o),g(o instanceof Error?o.message:"Failed to initialize")}finally{m(!1)}}j()},[]),f)return e.jsx(n,{maxWidth:"lg",sx:{mt:4},children:e.jsxs(s,{display:"flex",flexDirection:"column",alignItems:"center",gap:2,children:[e.jsx(v,{}),e.jsx(r,{children:"Initializing TreeConsole Demo..."})]})});if(x)return e.jsx(n,{maxWidth:"lg",sx:{mt:4},children:e.jsxs(p,{severity:"error",children:[e.jsx(r,{variant:"h6",children:"Error"}),e.jsx(r,{children:x})]})});if(!c||!t)return e.jsx(n,{maxWidth:"lg",sx:{mt:4},children:e.jsx(p,{severity:"warning",children:e.jsx(r,{children:"No client or tree available"})})});const l=`${t.treeId}Root`;return e.jsxs(n,{maxWidth:!1,disableGutters:!0,sx:{height:"100vh",display:"flex",flexDirection:"column"},children:[e.jsxs(s,{sx:{p:2,borderBottom:1,borderColor:"divider",backgroundColor:"background.paper"},children:[e.jsx(r,{variant:"h4",component:"h1",children:"TreeConsole Demo"}),e.jsx(r,{variant:"body2",color:"text.secondary",children:"Testing @hierarchidb/ui-treeconsole package integration"}),e.jsxs(r,{variant:"caption",display:"block",sx:{mt:1},children:["Tree: ",t.name," (ID: ",t.treeId,")"]})]}),e.jsx(s,{sx:{flex:1,overflow:"hidden",position:"relative"},children:e.jsx(b,{treeRootNodeId:l,nodeId:l,displayExpandedNode:!1,hideConsole:!1,showSearchOnly:!1,useTrashColumns:!1,mode:"restore",close:()=>console.log("Close clicked"),handleStartTour:()=>console.log("Start tour clicked"),workerClient:c})}),e.jsx(s,{sx:{p:1,borderTop:1,borderColor:"divider",backgroundColor:"grey.100"},children:e.jsxs(r,{variant:"caption",component:"div",children:["Debug: Client initialized | Tree: ",t.treeId," | Root: ",l]})})]})});export{G as default};
