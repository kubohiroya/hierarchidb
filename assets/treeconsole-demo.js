import{w as j,r as i}from"./vendor-react-BP9jdMJE.js";import{j as e}from"./jsx-runtime-D_zvdyIk.js";import{a as T}from"./index-CyZumM2T.js";import{W as b}from"./index-SzJX3EJy.js";import{C as n}from"./Container-CEYSW6ch.js";import{B as s,C as v,T as r}from"./Box-zDrc8-aq.js";import{A as p}from"./Alert-C-Br81AU.js";import"./assertThisInitialized-C6AqJUPC.js";import"./useThemeWithoutDefault-B_xv69Jx.js";import"./TransitionGroup-wYxCXXF3.js";import"./createSimplePaletteValueFilter-BuD9q6B8.js";import"./useThemeProps-BB4YCwI3.js";import"./useSlot-Cr8mcnhD.js";import"./IconButton-DRvuffCM.js";import"./Paper-hI1Q5KHP.js";const O=j(function(){const[d,h]=i.useState(null),[u,c]=i.useState(!0),[m,f]=i.useState(null),[t,g]=i.useState(null);if(i.useEffect(()=>{async function C(){try{c(!0);const o=await b.getSingleton();h(o);const a=await o.getAPI().getTrees();let x=null;if(a&&a.length>0)x=a[0]??null;else throw new Error("No trees available and createTree not implemented");g(x)}catch(o){console.error("Failed to initialize WorkerAPIClient:",o),f(o instanceof Error?o.message:"Failed to initialize")}finally{c(!1)}}C()},[]),u)return e.jsx(n,{maxWidth:"lg",sx:{mt:4},children:e.jsxs(s,{display:"flex",flexDirection:"column",alignItems:"center",gap:2,children:[e.jsx(v,{}),e.jsx(r,{children:"Initializing TreeConsole Demo..."})]})});if(m)return e.jsx(n,{maxWidth:"lg",sx:{mt:4},children:e.jsxs(p,{severity:"error",children:[e.jsx(r,{variant:"h6",children:"Error"}),e.jsx(r,{children:m})]})});if(!d||!t)return e.jsx(n,{maxWidth:"lg",sx:{mt:4},children:e.jsx(p,{severity:"warning",children:e.jsx(r,{children:"No client or tree available"})})});const l=`${t.treeId}Root`;return e.jsxs(n,{maxWidth:!1,disableGutters:!0,sx:{height:"100vh",display:"flex",flexDirection:"column"},children:[e.jsxs(s,{sx:{p:2,borderBottom:1,borderColor:"divider",backgroundColor:"background.paper"},children:[e.jsx(r,{variant:"h4",component:"h1",children:"TreeConsole Demo"}),e.jsx(r,{variant:"body2",color:"text.secondary",children:"Testing @hierarchidb/ui-treeconsole package integration"}),e.jsxs(r,{variant:"caption",display:"block",sx:{mt:1},children:["Tree: ",t.name," (ID: ",t.treeId,")"]})]}),e.jsx(s,{sx:{flex:1,overflow:"hidden",position:"relative"},children:e.jsx(T,{treeRootNodeId:l,nodeId:l,displayExpandedNode:!1,hideConsole:!1,showSearchOnly:!1,useTrashColumns:!1,mode:"restore",close:()=>console.log("Close clicked"),handleStartTour:()=>console.log("Start tour clicked"),workerClient:d})}),e.jsx(s,{sx:{p:1,borderTop:1,borderColor:"divider",backgroundColor:"grey.100"},children:e.jsxs(r,{variant:"caption",component:"div",children:["Debug: Client initialized | Tree: ",t.treeId," | Root:"," ",l]})})]})});export{O as default};
