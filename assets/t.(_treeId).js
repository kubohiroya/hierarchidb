import{w as T,b as I,u as v,r as s,O as C}from"./vendor-react-BP9jdMJE.js";import{j as e}from"./jsx-runtime-D_zvdyIk.js";import{l as S}from"./loader-D5if6doL.js";import{T as w,a as y,M as N,b}from"./TreeConsoleIntegration-Bm5uQwiG.js";import{S as A,U as B}from"./index-C9Ezzdro.js";import{W as L}from"./index-SzJX3EJy.js";import{B as a,T as P,C as z}from"./Box-zDrc8-aq.js";import{A as E,T as _}from"./Toolbar-CLindvYh.js";import{F as k,A as D}from"./Folder-CIpXYxUK.js";import"./assertThisInitialized-C6AqJUPC.js";import"./createSimplePaletteValueFilter-BuD9q6B8.js";import"./index-CyZumM2T.js";import"./useThemeWithoutDefault-B_xv69Jx.js";import"./TransitionGroup-wYxCXXF3.js";import"./treeNodeConverter-aJJwZjp1.js";import"./index-LrBs_WFz.js";import"./Paper-hI1Q5KHP.js";import"./Alert-C-Br81AU.js";import"./useSlot-Cr8mcnhD.js";import"./IconButton-DRvuffCM.js";import"./useThemeProps-BB4YCwI3.js";import"./i18n-6N6UC6AY-BJA6as56.js";async function ie(n){const t=await S(n.params);if(t.tree){const i=await t.client.getAPI().getNode({treeNodeId:t.tree.treeRootNodeId});return{...t,rootNode:i}}return t}const ne=T(function(){var d,m,p,x,u;const t=I(),i=v(),[f,g]=s.useState([]),[l,c]=s.useState(((d=t.tree)==null?void 0:d.treeId)||"");s.useEffect(()=>{(async()=>{try{const j=await(await L.getSingleton()).getAPI().getTrees();g(j)}catch(o){console.error("Failed to load trees:",o)}})()},[]),s.useEffect(()=>{var r;(r=t.tree)!=null&&r.treeId&&c(t.tree.treeId)},[(m=t.tree)==null?void 0:m.treeId]);const h=(r,o)=>{o&&o!==l&&(c(o),i(`/t/${o}`))};return e.jsxs(a,{sx:{height:"100vh",display:"flex",flexDirection:"column"},children:[e.jsx(E,{position:"static",color:"default",elevation:1,children:e.jsxs(_,{children:[e.jsx(P,{variant:"h6",component:"div",sx:{flexGrow:0,mr:3},children:((p=t.tree)==null?void 0:p.name)||"Tree Console"}),e.jsx(A,{direction:"row",spacing:2,sx:{flexGrow:1},children:e.jsx(w,{value:l,exclusive:!0,onChange:h,"aria-label":"tree selection",size:"small",children:f.map(r=>e.jsxs(y,{value:r.treeId,"aria-label":r.name,children:[r.name.toLowerCase().includes("project")?e.jsx(k,{sx:{mr:1,fontSize:20}}):r.name.toLowerCase().includes("resource")?e.jsx(N,{sx:{mr:1,fontSize:20}}):e.jsx(D,{sx:{mr:1,fontSize:20}}),r.name]},r.treeId))})}),e.jsx(a,{sx:{ml:"auto"},children:e.jsx(B,{})})]})}),e.jsx(a,{sx:{flex:1,overflow:"hidden"},children:e.jsx(s.Suspense,{fallback:e.jsx(a,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"},children:e.jsx(z,{})}),children:e.jsx(b,{treeId:(x=t.tree)==null?void 0:x.treeId,pageTreeNodeId:(u=t.tree)==null?void 0:u.treeRootNodeId,pageTreeNode:t.rootNode})})}),e.jsx(C,{})]})});export{ie as clientLoader,ne as default};
