<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" href="/hierarchidb/favicon.svg" />
    <title>HierarchiDB</title>
    <script type="text/javascript">
      // Hash routing handler for GitHub Pages
      // Convert path-based URLs to hash-based URLs
      (function() {
        var path = window.location.pathname;
        var base = '/hierarchidb';
        
        // If we're on a path that's not the base path, redirect to hash version
        if (path !== base + '/' && path.startsWith(base + '/')) {
          var hashPath = path.substring(base.length);
          window.location.replace(base + '/#' + hashPath + window.location.search + window.location.hash);
        }
      })();
    </script>
</head>
<body>
<div id="root"></div>
<script>
  // React Router SPA mode initialization with hash routing support
  window.__reactRouterContext = {
    "basename": "/hierarchidb/",
    "future": {
      "unstable_middleware": false,
      "unstable_optimizeDeps": false,
      "unstable_splitRouteModules": false,
      "unstable_subResourceIntegrity": false,
      "unstable_viteEnvironmentApi": false
    },
    "routeDiscovery": {"mode": "initial"},
    "ssr": false,
    "isSpaMode": true
  };
  
  // Intercept navigation to add hash prefix
  var originalPushState = history.pushState;
  var originalReplaceState = history.replaceState;
  
  history.pushState = function() {
    var url = arguments[2];
    if (url && !url.startsWith('#') && !url.startsWith('/hierarchidb/#')) {
      arguments[2] = '/hierarchidb/#' + url.replace('/hierarchidb', '');
    }
    return originalPushState.apply(history, arguments);
  };
  
  history.replaceState = function() {
    var url = arguments[2];
    if (url && !url.startsWith('#') && !url.startsWith('/hierarchidb/#')) {
      arguments[2] = '/hierarchidb/#' + url.replace('/hierarchidb', '');
    }
    return originalReplaceState.apply(history, arguments);
  };
  
  // Create a minimal stream for SPA mode
  window.__reactRouterContext.stream = new ReadableStream({
    start(controller) {
      window.__reactRouterContext.streamController = controller;
      controller.enqueue('[{"_1":2,"_3":-5,"_4":-5},"loaderData",{},"actionData","errors"]' + String.fromCharCode(10));
      controller.close();
    }
  }).pipeThrough(new TextEncoderStream());
</script>
<script type="module">
  import "/hierarchidb/assets/manifest-1288d6fe.js";
  import * as route0 from "/hierarchidb/assets/root.js";
  
  window.__reactRouterRouteModules = {"root": route0};
  
  import("/hierarchidb/assets/entry.client.js");
</script>
</body>
</html>